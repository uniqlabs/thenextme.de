$(document).ready(function(){function t(){d={},location.search.substr(1).split("&").forEach(function(t){d[t.split("=")[0]]=t.split("=")[1]})}function e(){(!d.p||"m3"!==d.p&&"m6"!==d.p&&"m12"!==d.p)&&(window.location="/de/pakete/")}function n(){var t={m3:"quartalsweise",m6:"halbjährlich",m12:"jährlich"},e=d.p,n=getPrice(e),i=n.d?n.dp:n.p,r=n.d?"(inkl. "+Math.round(100*n.d)+"% Rabatt für die erste Abbuchung)":"";$(".months").html(n.m),$(".price .amount").html(formatPrice(i)),$(".price .billed").html("Abbuchung "+t[e]),$(".discount").html(r)}function i(){v.hide(),v.css({opacity:1}),f.validator().on("submit",a)}function a(t){if(!t.isDefaultPrevented()){t.preventDefault();var e=m.val(),n=h.val(),i=b.val(),r=g.is(":checked"),a=d.p,l=getPrice(a);u(),s(!0);var f={type:"POST",contentType:"application/json",url:j,data:JSON.stringify({firstName:e,email:n,lang:"de",pass:i,pricingTest:{newsletter:r,package:a,variant:l.v,price:l.p,total:l.t,discount:l.d}}),success:o,error:c};$.ajax(f)}}function s(t){t?(p.attr("disabled",!0),v.fadeIn(),w.fadeOut()):(p.attr("disabled",!1),v.fadeOut(),w.fadeIn())}function o(){s(!1),window.location="/de/danke-registrierung/?tk="+Math.random().toString(36).substring(2,8)}function c(t,e,n){n&&(console.log("jqXHR: "+JSON.stringify(t)),console.log("Status: "+e),console.log("Error: "+n));var i="Unbekannter Fehler";409===t.status?i="Für diese E-Mail-Adresse existiert bereits ein Nutzerkonto.":400===t.status&&(i="Ungültige Eingabe"),l(i),s(!1)}function l(t){y.html(t),k.slideDown()}function u(){k.slideUp()}var d,f=$("#signup-form"),p=$("#signup-form :input"),m=$("#firstName"),g=$("#newsletter"),h=$("#email"),b=$("#password"),v=$("#btn-submit .spinner"),w=$("#btn-submit .text"),k=$(".req-error"),y=$(".alert-danger"),j=r("uggcf://havd-ncv-qri.urebxhncc.pbz/hfref");t(),e(),n(),i(),m.focus()});