$(document).ready(function(){function e(){var e=a();if(g=window.location.hash.slice(1),e.env&&"dev"!=e.env&&"prod"!=e.env)s('Unbekannte Umgebung: "'+e.env+'"');else if(u=e.env||u,g&&3===g.split(".").length){var t=jwt_decode(g),o={type:"PUT",contentType:"application/json",url:r("uggcf://havd-ncv-")+("dev"===u?r("qri"):r("cebq"))+r(".urebxhncc.pbz/nhgu/rznvy"),data:JSON.stringify({confirmToken:g}),success:function(){i("Danke, Deine E-Mail-Adresse wurde erfolgreich bestätigt!")},error:function(e,r,i){i&&(console.log("jqXHR: "+JSON.stringify(e)),console.log("Status: "+r),console.log("Error: "+i));var a="Unbekannter Fehler";404===e.status?a="Das Nutzerkonto für diese Adresse existiert nicht oder wurde bereits bestätigt.":400===e.status&&(a="Der Bestätigungslink ist abgelaufen oder ungültig.",c.click(n.bind(null,t.email)),l.show()),s(a)}};$.ajax(o)}else s("Der Bestätigungslink hat ein ungültiges Format.")}function n(e){l.hide(),t("Ein neuer Link wird angefordert...");var n={type:"POST",contentType:"application/json",url:r("uggcf://havd-ncv-")+("dev"===u?r("qri"):r("cebq"))+r(".urebxhncc.pbz/nhgu/rznvy/pynvz"),data:JSON.stringify({email:e}),success:function(){i("Falls "+e+" zu einem unbestätigten Nutzerkonto gehört, wurde gerade ein Bestätigungslink dorthin gesendet. Er ist 24h gültig. Bitte prüfe Dein Postfach und auch Deinen Spam-Ordner.")},error:function(n,t,r){r&&(console.log("jqXHR: "+JSON.stringify(n)),console.log("Status: "+t),console.log("Error: "+r));var i="Unbekannter Fehler";400===n.status&&(i="Der Link enthält eine ungültige E-Mail-Adresse ("+e+'). Bitte wende Dich an <span class="rv">ed.emtxeneht@ecivres</span>.'),s(i)}};$.ajax(n)}function t(e){o.removeClass("alert-success"),o.removeClass("alert-danger"),o.addClass("alert-info"),o.html(e)}function s(e){o.removeClass("alert-info"),o.removeClass("alert-success"),o.addClass("alert-danger"),o.html(e)}function i(e){o.removeClass("alert-info"),o.removeClass("alert-danger"),o.addClass("alert-success"),o.html(e)}function a(){var e={};return location.search.substr(1).split("&").forEach(function(n){e[n.split("=")[0]]=n.split("=")[1]}),e}var o=$("#msg"),l=$("#new-link"),c=$("#new-link button"),u="prod",g=null;l.hide(),l.css({opacity:1}),e()});